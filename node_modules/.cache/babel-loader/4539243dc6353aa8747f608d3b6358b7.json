{"ast":null,"code":"import storage from './storage';\nimport { useSelector } from 'react-redux';\nuseSelector(state => {\n  console.log(state);\n  return state;\n});\nconst martinGales = storage.getStorage().martinGales;\nconst type = \"BINARY\"; // BINARY OR DIGITAL\n\nlet finishedGale = false;\nlet winned = false;\nlet forcedStopMartinGale = false;\nexport default async function operate(API, active, action, duration) {\n  console.log(\"===============================\");\n  console.log(`ULTIMAS VELAS: ${action}`);\n  console.log(`DIREÇAO: ${action}`);\n  const winsValue = storage.getStorage().winsValue;\n  const lossValue = storage.getStorage().losssValue;\n  const stopGain = storage.getStorage().stopGain;\n  const stopLoss = storage.getStorage().stopLoss;\n  forcedStopMartinGale = false;\n\n  async function tradeAgain() {\n    for (let martinGale of martinGales) {\n      if (Number(martinGale) + lossValue >= stopLoss) {\n        forcedStopMartinGale = true;\n        storage.stopLossStoped();\n        return;\n      }\n\n      ;\n\n      if (winsValue >= stopGain) {\n        forcedStopMartinGale = true;\n        storage.stopGain();\n        return;\n      }\n\n      ;\n      const martinGaleNumber = martinGales.indexOf(martinGale);\n      const isMartinGale = martinGale == martinGales[0];\n      martinGale = martinGale.toFixed(2);\n      console.log(isMartinGale ? `ENTRADA: R$ ${martinGale}` : `MG${martinGaleNumber}: R$ ${martinGale}`);\n      const order = await API.buy({\n        active,\n        action: action,\n        amount: martinGale,\n        type,\n        duration: duration //1 e 1 minutos\n\n      });\n      await order.close(); //console.log(await API.getBalance('PRACTICE').amount);\n\n      console.log('ordem', order.quote.win);\n\n      if (!order.quote.win) {\n        storage.addLossValue(Number(martinGale));\n\n        if (lossValue >= stopLoss) {\n          storage.stopLossStoped();\n          forcedStopMartinGale = true;\n        }\n      }\n\n      ;\n\n      if (order.quote.win) {\n        storage.addWinValue(Number(martinGale));\n\n        if (winsValue >= stopGain) {\n          storage.stopGain();\n          forcedStopMartinGale = true;\n        }\n      }\n\n      ;\n      console.log(\"\\nWins\", ' ', storage.getStorage().winCount, ' ', 'Losss', ' ', storage.getStorage().lossCount);\n      const result = order.quote.win ? \"WIN\" : \"LOSS\";\n      console.log(\"Resultado: \", result);\n\n      if (martinGale == martinGales[martinGales.length - 1].toFixed(2)) {\n        finishedGale = true;\n        break;\n      }\n\n      if (result == 'WIN') {\n        winned = true;\n        break;\n      }\n    }\n  }\n\n  while (!finishedGale && !winned && !forcedStopMartinGale) await tradeAgain();\n\n  finishedGale = false;\n  winned = false;\n}","map":{"version":3,"sources":["/home/user/Desktop/project/iqoption/src/utils/operate.ts"],"names":["storage","useSelector","state","console","log","martinGales","getStorage","type","finishedGale","winned","forcedStopMartinGale","operate","API","active","action","duration","winsValue","lossValue","losssValue","stopGain","stopLoss","tradeAgain","martinGale","Number","stopLossStoped","martinGaleNumber","indexOf","isMartinGale","toFixed","order","buy","amount","close","quote","win","addLossValue","addWinValue","winCount","lossCount","result","length"],"mappings":"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","sourcesContent":["import storage from './storage';\n\nimport { useSelector } from 'react-redux';\n\nuseSelector((state) => {\n\tconsole.log(state);\n\treturn state;\n});\n\nconst martinGales = storage.getStorage().martinGales;\n\nconst type = \"BINARY\" // BINARY OR DIGITAL\n\nlet finishedGale = false;\nlet winned = false;\nlet forcedStopMartinGale = false;\n\nexport default async function operate(API, active, action, duration) {\t\n\t\tconsole.log(\"===============================\")\n\n\t\tconsole.log(`ULTIMAS VELAS: ${action}`)\n\t\tconsole.log(`DIREÇAO: ${action}`)\n\t\tconst winsValue = storage.getStorage().winsValue;\n\t\tconst lossValue = storage.getStorage().losssValue;\n\t\tconst stopGain = storage.getStorage().stopGain;\n\t\tconst stopLoss = storage.getStorage().stopLoss;\n\n\t\tforcedStopMartinGale = false;\n\t\tasync function tradeAgain() {\n\t\t\tfor (let martinGale of martinGales) {\t\n\n\t\t\t\tif(Number(martinGale) + lossValue >= stopLoss) {\n\t\t\t\t\tforcedStopMartinGale = true;\n\t\t\t\t\tstorage.stopLossStoped();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tif(winsValue >= stopGain) {\n\t\t\t\t\tforcedStopMartinGale = true;\n\t\t\t\t\tstorage.stopGain();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tconst martinGaleNumber = martinGales.indexOf(martinGale)\n\t\t\t\tconst isMartinGale = martinGale == martinGales[0]\n\t\t\t\tmartinGale = martinGale.toFixed(2) as any\n\n\t\t\t\tconsole.log(isMartinGale ? `ENTRADA: R$ ${martinGale}` : `MG${martinGaleNumber}: R$ ${martinGale}`)\n\t\t\t\tconst order = await API.buy({\n\t\t\t\t\tactive,\n\t\t\t\t\taction: action,\n\t\t\t\t\tamount: martinGale,\n\t\t\t\t\ttype,\n\t\t\t\t\tduration: duration //1 e 1 minutos\n\t\t\t\t})\n\t\t\t\tawait order.close()\n\t\t\t\t//console.log(await API.getBalance('PRACTICE').amount);\n\t\t\t\tconsole.log('ordem', order.quote.win);\n\n\n\t\t\t\tif(!order.quote.win) {\n\t\t\t\t\tstorage.addLossValue(Number(martinGale));\n\t\t\t\t\tif(lossValue >= stopLoss) {\n\t\t\t\t\t\tstorage.stopLossStoped();\n\t\t\t\t\t\tforcedStopMartinGale = true;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif(order.quote.win) {\n\t\t\t\t\tstorage.addWinValue(Number(martinGale));\n\t\t\t\t\tif(winsValue >= stopGain) {\n\t\t\t\t\t\tstorage.stopGain();\n\t\t\t\t\t\tforcedStopMartinGale = true;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\n\t\t\t\tconsole.log(\"\\nWins\", ' ',storage.getStorage().winCount, ' ', 'Losss', ' ', storage.getStorage().lossCount);\n\n\t\t\t\tconst result = order.quote.win ? \"WIN\" : \"LOSS\"\n\t\t\t\tconsole.log(\"Resultado: \", result);\n\n\t\t\t\tif (martinGale == martinGales[martinGales.length - 1].toFixed(2) as any) {\n\t\t\t\t\tfinishedGale = true;\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tif (result == 'WIN') {\n\t\t\t\t\twinned = true;\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t}\n\t\twhile((!finishedGale && !winned) && !forcedStopMartinGale) await tradeAgain();\n\n\t\tfinishedGale = false;\n\t\twinned = false;\n}"]},"metadata":{},"sourceType":"module"}