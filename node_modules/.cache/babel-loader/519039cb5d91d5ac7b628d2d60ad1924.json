{"ast":null,"code":"// const WebSocket = require(\"ws\")\nvar Settings = require(\"../settings\");\n\nmodule.exports = function () {\n  var _this = this;\n\n  var _Settings$WEBSOCKET$G = Settings.WEBSOCKET.GATEWAY,\n      protocol = _Settings$WEBSOCKET$G.protocol,\n      host = _Settings$WEBSOCKET$G.host,\n      port = _Settings$WEBSOCKET$G.port,\n      path = _Settings$WEBSOCKET$G.path;\n  this.socket = new WebSocket(protocol + \"://\" + host + \":\" + port + \"/\" + path);\n\n  this.socket.onmessage = function (message) {\n    //MODS\n    var payload = message.data; //\n\n    message = JSON.parse(payload); //message to payload\n\n    _this.emitter.emit(message.name, message);\n  };\n\n  return new Promise(function (resolve, reject) {\n    _this.socket.onopen = resolve;\n    _this.socket.onerror = reject;\n  });\n};","map":{"version":3,"sources":["/home/user/Desktop/project/iqoption/node_modules/iqoptionzzz/lib/WebSocket/init.js"],"names":["Settings","require","module","exports","WEBSOCKET","GATEWAY","protocol","host","port","path","socket","WebSocket","onmessage","message","payload","data","JSON","parse","emitter","emit","name","Promise","resolve","reject","onopen","onerror"],"mappings":"AAAA;AACA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,YAAW;AAAA;;AAC3B,8BAKIH,QAAQ,CAACI,SAAT,CAAmBC,OALvB;AAAA,MACCC,QADD,yBACCA,QADD;AAAA,MAECC,IAFD,yBAECA,IAFD;AAAA,MAGCC,IAHD,yBAGCA,IAHD;AAAA,MAICC,IAJD,yBAICA,IAJD;AAOA,OAAKC,MAAL,GAAc,IAAIC,SAAJ,CAAcL,QAAQ,GAAG,KAAX,GAAmBC,IAAnB,GAA0B,GAA1B,GAAgCC,IAAhC,GAAuC,GAAvC,GAA6CC,IAA3D,CAAd;;AAEA,OAAKC,MAAL,CAAYE,SAAZ,GAAwB,UAAAC,OAAO,EAAI;AAClC;AACA,QAAMC,OAAO,GAAGD,OAAO,CAACE,IAAxB,CAFkC,CAGlC;;AACAF,IAAAA,OAAO,GAAGG,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAV,CAJkC,CAIJ;;AAC9B,IAAA,KAAI,CAACI,OAAL,CAAaC,IAAb,CAAkBN,OAAO,CAACO,IAA1B,EAAgCP,OAAhC;AACA,GAND;;AAQA,SAAO,IAAIQ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,IAAA,KAAI,CAACb,MAAL,CAAYc,MAAZ,GAAqBF,OAArB;AACA,IAAA,KAAI,CAACZ,MAAL,CAAYe,OAAZ,GAAsBF,MAAtB;AACA,GAHM,CAAP;AAIA,CAtBD","sourcesContent":["// const WebSocket = require(\"ws\")\r\nconst Settings = require(\"../settings\")\r\n\r\nmodule.exports = function() {\r\n\tconst {\r\n\t\tprotocol,\r\n\t\thost,\r\n\t\tport,\r\n\t\tpath\r\n\t} = Settings.WEBSOCKET.GATEWAY\r\n\r\n\tthis.socket = new WebSocket(protocol + \"://\" + host + \":\" + port + \"/\" + path)\r\n\r\n\tthis.socket.onmessage = message => {\r\n\t\t//MODS\r\n\t\tconst payload = message.data;\r\n\t\t//\r\n\t\tmessage = JSON.parse(payload) //message to payload\r\n\t\tthis.emitter.emit(message.name, message)\r\n\t}\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tthis.socket.onopen = resolve\r\n\t\tthis.socket.onerror = reject\r\n\t})\r\n}"]},"metadata":{},"sourceType":"script"}