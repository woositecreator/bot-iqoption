{"ast":null,"code":"module.exports = function (active, size, count, to) {\n  return new Promise((resolve, reject) => {\n    if (!(active in this.actives)) return reject(\"Ativo inválido.\");\n    const id = this.WebSocket.send(\"sendMessage\", {\n      name: \"get-candles\",\n      version: \"2.0\",\n      body: {\n        active_id: this.actives[active],\n        size,\n        to,\n        count\n      }\n    });\n\n    const callback = message => {\n      if (message.request_id == id) {\n        this.WebSocket.emitter.removeListener(\"candles\", callback);\n        if (message.status != 2000) return reject(message.msg);\n        return resolve(message.msg.candles);\n      }\n    };\n\n    this.WebSocket.getMessage(\"candles\", callback);\n  });\n};","map":{"version":3,"sources":["/home/user/Desktop/project/iqoption/node_modules/iqoptionzzz/lib/api/websocket/getcandles.js"],"names":["module","exports","active","size","count","to","Promise","resolve","reject","actives","id","WebSocket","send","name","version","body","active_id","callback","message","request_id","emitter","removeListener","status","msg","candles","getMessage"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,EAA9B,EAAkC;AAClD,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvC,QAAI,EAAEN,MAAM,IAAI,KAAKO,OAAjB,CAAJ,EACC,OAAOD,MAAM,CAAC,iBAAD,CAAb;AAED,UAAME,EAAE,GAAG,KAAKC,SAAL,CAAeC,IAAf,CAAoB,aAApB,EAAmC;AAC7CC,MAAAA,IAAI,EAAE,aADuC;AAE7CC,MAAAA,OAAO,EAAE,KAFoC;AAG7CC,MAAAA,IAAI,EAAE;AACLC,QAAAA,SAAS,EAAE,KAAKP,OAAL,CAAaP,MAAb,CADN;AAELC,QAAAA,IAFK;AAGLE,QAAAA,EAHK;AAILD,QAAAA;AAJK;AAHuC,KAAnC,CAAX;;AAWA,UAAMa,QAAQ,GAAGC,OAAO,IAAI;AAC3B,UAAIA,OAAO,CAACC,UAAR,IAAsBT,EAA1B,EAA8B;AAC7B,aAAKC,SAAL,CAAeS,OAAf,CAAuBC,cAAvB,CAAsC,SAAtC,EAAiDJ,QAAjD;AACA,YAAIC,OAAO,CAACI,MAAR,IAAkB,IAAtB,EAA4B,OAAOd,MAAM,CAACU,OAAO,CAACK,GAAT,CAAb;AAC5B,eAAOhB,OAAO,CAACW,OAAO,CAACK,GAAR,CAAYC,OAAb,CAAd;AACA;AACD,KAND;;AAQA,SAAKb,SAAL,CAAec,UAAf,CAA0B,SAA1B,EAAqCR,QAArC;AACA,GAxBM,CAAP;AAyBA,CA1BD","sourcesContent":["module.exports = function(active, size, count, to) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (!(active in this.actives))\r\n\t\t\treturn reject(\"Ativo inválido.\")\r\n\r\n\t\tconst id = this.WebSocket.send(\"sendMessage\", {\r\n\t\t\tname: \"get-candles\",\r\n\t\t\tversion: \"2.0\",\r\n\t\t\tbody: {\r\n\t\t\t\tactive_id: this.actives[active],\r\n\t\t\t\tsize,\r\n\t\t\t\tto,\r\n\t\t\t\tcount\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst callback = message => {\r\n\t\t\tif (message.request_id == id) {\r\n\t\t\t\tthis.WebSocket.emitter.removeListener(\"candles\", callback)\r\n\t\t\t\tif (message.status != 2000) return reject(message.msg)\r\n\t\t\t\treturn resolve(message.msg.candles)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.WebSocket.getMessage(\"candles\", callback)\r\n\t})\r\n}"]},"metadata":{},"sourceType":"script"}